<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="manufacture_page_format" model="report.paperformat">
        <field name="name">Manufacture log page formate</field>
        <field name="default" eval="True"/>
        <field name="format">A4</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">7</field>
        <field name="margin_bottom">20</field>
        <field name="margin_left">7</field>
        <field name="margin_right">7</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">2</field>
        <field name="dpi">90</field>
    </record>
	<!-- report -->
	<report 
        id="manufacture_log_report"
        model="mrp.production"
        string="Manufacture Log Sheet"
        name="manufacture_log_sheet.manufacturelog_report_template"
        file="manufacture_log_sheet.manufacturelog_report_template"
        report_type="qweb-pdf"
         print_report_name="(object.name)"
         attachment="(object.state == 'posted') and ((object.name or 'INV').replace('/','_')+'.pdf')"
         paperformat="manufacture_log_sheet.manufacture_page_format"/>

    <template id="manufacturelog_report_template">
    	<t t-call="web.html_container">
    		<t t-foreach="docs" t-as="o">
    			<t t-call="manufacture_log_sheet.external_layout_manufacture">
    				<!-- <div class="page"> -->
    					<style>
    						.table th, table td {
    						border: 1px solid black; !important
    						border-top: 1px solid black; !important
    						padding:1px !important;
                            }
                            .table tr th{
                            padding:1px !important
                            }
                        </style>
                        <table class="table" style="width:100%;height:100mm;">
                            <tr style="height:3px">
                                <td colspan="2" style="border:1px solid white;height:100px">
                                    <img class="text-left" t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" style="height:auto;max-width:100px;float:left;"/>
                                </td>
                                <td colspan="3" style="border:1px solid white;">
                                    <h4 style="text-align:left;"><strong><span t-field="o.company_id.name"/></strong></h4>
                                    <p style="text-align:left;font-size:13px;margin_top:-1px">
                                        <span style="text-align:left;font-size:13px;">
                                            <t t-set="com_add" t-value="o.picking_type_id.warehouse_id.partner_id"/>
                                            <span t-field="com_add.street"/><br/>
                                            <span t-field="com_add.city"/>&#160;
                                            <span t-field="com_add.state_id"/>&#160;
                                            <span t-field="com_add.zip"/>&#160;
                                            <span t-field="com_add.country_id"/><br/>
                                            <span>Tel : <span t-field="com_add.phone"/></span><br/>
                                            <span>eMail : <span t-field="com_add.email"/></span><br/>
                                            <strong style="font-size:14px;">GSTIN: <span t-field="com_add.vat"/></strong>
                                        </span>
                                    </p>
                                </td>
                                <td colspan="3" style="border:1px solid white;">
                                    <h3 style="text-align:right">LOG SHEET</h3>
                                </td>
                            </tr>
                        	<tr>
                        		<td colspan="3" style="border:none;padding:1px;"></td>
                        	</tr>
                        	<tr>
                        		<td colspan="5" style="border:none"></td>
                        		<th colspan="2" style="padding:1px;"><strong>Batch no</strong></th>
                                <td colspan="5" style="border-top:solid 1px"><span t-esc="o.name"/></td>
                        	</tr>
                        	<tr>
                        		<th colspan="5" style="border:none;"></th>
                        		<th colspan="2" style="padding:1px;"><strong>Schedule</strong></th>
                        		<th colspan="2" style="padding:1px;width:10%;text-align:center"><strong>Date/Time</strong></th>
                        	</tr>
                        	<tr style="color:black;font-size:13px;border-bottom:1px solid black;">
                        		<th style="text-align:center;padding:1px"><strong>Yeild</strong></th>
                        		<th style="text-align:center;"><strong>Liq</strong></th>
                        		<th style="text-align:center;"><strong>Press Cake</strong></th>
                        		<th style="text-align:center;"><strong>Dry Wt</strong></th>
                        		<th style="text-align:center;"><strong>% Assay</strong></th>
                        		<th colspan="2" style="text-align:center"><strong>Start</strong></th>
                        		<th colspan="4"  style="text-align:center"></th>
                        	</tr>
                        	<tr>
                        		<td  style="padding:1px;">expected</td>
                        		<td></td>
                        		<td></td>
                        		<td></td>
                        		<td></td>
                        		<td colspan="2" style="padding:1px;"><strong>Started On</strong></td>
                        		<td colspan="3" style="padding:1px;" ><span t-field="o.date_planned_start"/></td>
                        		<!-- <td colspan="2" style="padding:1px;"><span t-esc="o.date_planned_start.strftime('%H:%M:%S')"/></td> -->
                        	</tr>
                        	<tr>
                        		<td  style="padding:1px;">obtained</td>
                        		<td></td>
                        		<td></td>
                        		<td></td>
                        		<td></td>
                        		<td colspan="2"  style="padding:1px;"><strong>Compl On</strong></td>
                        		<td colspan="3" style="padding:1px;"><span t-field="o.date_planned_finished"/></td>
                        		<!-- <td colspan="2" ><span t-esc="o.date_planned_finished.strftime('%H:%M:%S')"/></td> -->
                        		
                        	</tr>
                        </table>

                         <!-- table for yeld -->
                        <table class="table" style="margin-top:-18px;" >
                        	<tr>
                        		<th style="text-align:center;">Sr</th>
                        		<th style="text-align:center;">Material</th>
                        		<th style="text-align:center;">Lot no</th>
                        		<th style="text-align:center;">Str %</th>
                        		<th style="text-align:center;">Consumed</th>
                                <th style="text-align:center;">Uom</th>
                        	</tr>
                            <t t-set="i" t-value="1"/>
                            <t t-foreach='o.move_raw_ids' t-as='raw'>
                                <tr>
                                    <td style="padding:1px;"><span t-esc="i"/></td>
                                    <td style="padding:1px;"><span t-field="raw.product_id"/></td>
                                    <td style="padding:1px;"><t t-foreach="raw.move_line_ids"  t-as="lot"><span t-esc="lot.lot_id.name"/></t></td>
                                    <td style="padding:1px;"> </td>
                                    <td style="padding:1px;"><span t-esc="raw.quantity_done"/></td>
                                    <td style="padding:1px;"><span t-field="raw.product_uom"/></td>
                                </tr>
                                <t t-set="i" t-value="i + 1"/>
                            </t>
                        </table>
                        <table class="table" style="width:100%;height:15mm;"><!-- margin-top:-18px; -->
                            <t t-set="work_order" t-value="o.get_work_orders()"/>
                            <t t-foreach="work_order" t-as="order_list">
                                <tr>
                                    <th colspan="8" style="border:1px solid white;border-bottom:1px solid black;height:5px !important;"></th>
                                </tr>
                                <tr>
                                    <th colspan="8">Operation:<span t-esc="order_list.name"/><br/><br/></th>
                                </tr>
                                <tr>
                                    <th rowspan="2" style="width:48px">Sr</th>
                                    <th rowspan="2">Process Description</th>
                                    <th rowspan="2" >Equip</th>
                                    <th colspan="2">Time</th>
                                    <th>Temp</th>
                                    <th rowspan="2">Ph</th>
                                    <th rowspan="2">Comment and initials</th>
                                </tr>
                                <!-- <p style="page-break-after:always;"/> -->
                                <tr>
                                    <th >Start Time</th>
                                    <th >End time</th>
                                    <th >deg c</th>
                                </tr>

                                <t t-set="i" t-value="1"/>
                                <t t-foreach="order_list.temp_id" t-as="temp_data">
                                    <tr style="height:1px">
                                        <td style="padding:1px;"><span t-esc="i"/></td>
                                        <td style="padding:1px;"><span t-esc="temp_data.description"/></td>
                                        <td style="padding:1px;"></td>
                                        <td style="padding:1px;"><span t-esc="temp_data.start_time"/></td>
                                        <td style="padding:1px;"><span t-esc="temp_data.end_time"/></td>
                                        <td style="padding:1px;"><span t-esc="temp_data.temp"/></td>
                                        <td style="padding:1px;"><span t-esc="temp_data.ph"/></td>
                                        <td style="padding:1px;"></td>
                                    </tr>
                                    <t t-set="i" t-value="i + 1"/>
                                </t>
                             </t>
                        </table>
                   	</t>
    		    </t>
    	    </t>
    </template>
</odoo>
