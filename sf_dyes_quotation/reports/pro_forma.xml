<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data>

    <record id="sf_page_format" model="report.paperformat">
        <field name="name">SF proforma page format</field>
        <field name="default" eval="True"/>
        <field name="format">A4</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">7</field>
        <field name="margin_bottom">2</field>
        <field name="margin_left">7</field>
        <field name="margin_right">7</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">2</field>
        <field name="dpi">90</field>
    </record>

    <report
            id="custom_proforma_sfdyes"
            model="sale.order"
            string="SFdyes Pro-Forma Invoice"
            report_type="qweb-pdf"
            name="sf_dyes_quotation.sales_proforma_report"
            file="sf_dyes_quotation.sales_proforma_report"
            attachment="(object.state == 'credit') and ((object.name or 'INV').replace('/','_')+'.pdf')"
            print_report_name="(object._get_report_base_filename())"
            paperformat="sf_dyes_quotation.sf_page_format"
            menu='False'
        />

    <template id="sales_proforma_report">
    <t t-call="web.html_container">
    <t t-foreach="docs" t-as="o">
    <t t-call="sf_dyes_quotation.external_layout_standard_sf">
    <table class="table" style="border:1px solid black;border-top:1px solid white;width:100%;margin-bottom:0;">
        <tr>
            <div class="row">
                <div class="col-2" style="margin-top:20px" >
                    <img class="text-right" t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" style="height:150px;max-width:100px float:left;"/>
                </div>
                <div class="col-10" style="padding:30px;word-wrap: break-word !important;">
                    <h4 style="text-align:left;">
                        <strong><span t-field="o.company_id.name"/></strong>
                    </h4>
                    <p style="text-align:left;font-size:13px;">
                    <span style="text-align:left;font-size:13px;">
                        <t t-set="wh_add" t-value="o.warehouse_id.partner_id"/>
                        <span t-field="wh_add.street"/><br/>
                        <span t-field="wh_add.street2"/><br/>
                        <span t-field="wh_add.city"/>&#160;
                        <span t-field="wh_add.state_id"/>&#160;
                        <span t-field="wh_add.zip"/>&#160;
                        <span t-field="wh_add.country_id"/><br/>
                        <span>Tel : <span t-field="wh_add.phone"/></span><br/>
                        <span>Email : <span t-field="wh_add.email"/></span><br/>
                        <strong style="font-size:14px;">GSTIN: <span t-field="wh_add.vat"/></strong>
                    </span>
                    </p>
                </div>
            </div>
        </tr>
        <tr>
            <td style="border:2px solid black;text-align:center;font-size:13px;" colspan="10">
                <h6><strong>PRO-FORMA INVOICE</strong></h6>
            </td>
        </tr>
        <tr>
            <td style="border:2px solid black;font-size:13px;" colspan="5">
                <strong>Billed to:</strong>
                <br/>
                <strong style="font-size:15px"><span t-if="o.partner_id.name" t-field="o.partner_id.name"/></strong><br/>
                <span t-if="o.partner_id.street" t-field="o.partner_id.street"/>,<br/>
                <span t-if="o.partner_id.street2" t-field="o.partner_id.street2"/><br/>
                <span t-if="o.partner_id.city" t-field="o.partner_id.city"/>
                <span t-if="o.partner_id.state_id" t-field="o.partner_id.state_id"/>
                <span t-if="o.partner_id.zip" t-field="o.partner_id.zip"/>
                <span t-if="o.partner_id.country_id" t-field="o.partner_id.country_id"/><br/>
                <t t-if="o.partner_id.vat">
                    <strong style="font-size:12px;">GSTIN:
                    <span t-field="o.partner_id.vat"/>
                    </strong>
                </t>
            </td>
            <td style="text-align:left;border:2px solid black;font-size:13px;" colspan="5">
                <div class="row">
                    <div class="col-4" style="text-align:left">
                        <span style="font-size:15px">Pro-forma No: </span><br/>
                        <span>Pro-forma Date: </span><br/>
                        <span>Payment Method: </span><br/>
                    </div>
                    <div class="col-8" style="text-align:left">
                        <strong style="font-size:15px"><span t-field="o.name"/></strong><br/>
                        <span t-esc="o.date_order.strftime('%d-%m-%Y')"/><br/>
                        <span t-field="o.payment"/><br/>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td style="border:2px solid black;font-size:13px;" colspan="5">
                <strong>Shipped to:</strong>
                <br/>
                <span t-if="o.partner_shipping_id.name" t-field="o.partner_shipping_id.name"/><br/>
                <span t-if="o.partner_shipping_id.street" t-field="o.partner_shipping_id.street"/><br/>
                <span t-if="o.partner_shipping_id.street2" t-field="o.partner_shipping_id.street2"/><br/>
                <span t-if="o.partner_shipping_id.city" t-field="o.partner_shipping_id.city"/>
                <span t-if="o.partner_shipping_id.state_id" t-field="o.partner_shipping_id.state_id"/>
                <span t-if="o.partner_shipping_id.zip" t-field="o.partner_shipping_id.zip"/>
                <span t-if="o.partner_shipping_id.country_id" t-field="o.partner_shipping_id.country_id"/><br/>
                <t t-if="o.partner_shipping_id.vat">
                    <strong style="font-size:12px;">GSTIN:
                    <span t-field="o.partner_shipping_id.vat"/>
                    </strong>
                </t>
            </td>
            <td style="text-align:left;border:2px solid black;font-size:13px;" colspan="5">
                <div class="row">
                    <div class="col-4" style="text-align:left">
                        Transporter: <br/>
                        Destination : <br/>
                        Delivery Terms: <br/>
                    </div>
                    <div class="col-8" style="text-align:left">
                        <span t-field="o.transporter"/><br/>
                        <span t-field="o.destination"/><br/>
                        <span t-esc="o.incoterm.name"/>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td style="border:2px solid black;text-align:center;font-size:13px;width:1%"> Sl.No.</td>
            <td style="border:2px solid black;text-align:center;font-size:13px;width:30%" colspan="2"> Item Description</td>
            <td style="border:2px solid black;text-align:center;font-size:13px;width:9%"> HSN/SAC</td>
            <td style="border:2px solid black;text-align:center;font-size:13px;width:10%">No. of Pkgs</td>
            <td style="border:2px solid black;text-align:center;font-size:13px;width:10%">PKG Size</td>
            <td style="border:2px solid black;text-align:center;font-size:13px;width:8%">Unit</td>
            <td style="border:2px solid black;text-align:center;font-size:13px;width:8%">Quantity</td>
            <td style="border:2px solid black;text-align:center;font-size:13px;width:12%">Rate</td>
            <td style="border:2px solid black;text-align:center;font-size:13px;width:12%">Taxable Value</td>
        </tr>
        <t t-set="sl" t-value="1"/>
        <t t-foreach="o.order_line" t-as="line">
            <tr>
                <td style="border:2px solid black;text-align:center;font-size:13px;width:1%">
                    <span t-esc="sl"/>
                    <t t-set="sl" t-value="sl+1"/>
                </td>
                <td style="border:2px solid black;text-align:left;font-size:13px;width:30%" colspan="2">
                    <span t-field="line.product_id.name"/><br/>
                </td>
                <td style="border:2px solid black;text-align:center;font-size:13px;width:9%">
                    <t t-if="line.product_id.l10n_in_hsn_code">
                        <span t-field="line.product_id.l10n_in_hsn_code"/>
                    </t>
                </td>
                <td style="border:2px solid black;text-align:center;font-size:13px;width:10%">
                    <t t-if="line.product_packaging">
                        <span t-field="line.z_package"/>
                    </t>
                </td>
                <td style="border:2px solid black;text-align:center;font-size:13px;width:10%">
                    <t t-if="line.product_packaging">
                        <span t-field="line.product_packaging"/>
                    </t>
                </td>
                <td style="border:2px solid black;text-align:center;font-size:13px;width:8%">
                    <span t-field="line.product_uom"/>
                </td>
                <td style="border:2px solid black;text-align:center;font-size:13px;width:8%">
                    <span t-esc="'%.1f'%(line.product_uom_qty)"/>
                </td>
                <td style="border:2px solid black;text-align:right;font-size:13px;width:12%">
                    <span t-field="line.price_unit"/>
                </td>
                <td style="border:2px solid black;text-align:right;font-size:13px;width:12%">
                    <span t-field="line.price_subtotal"/>
                </td>
            </tr>
        </t>
        <tr>
            <td style="border:2px solid black;text-align:left;font-size:13px;" colspan="7">
                <br/>
                <t t-foreach="o.amount_by_group" t-as="tax_line">
                    Total <span t-esc="tax_line[0]"/> in Words: 
                    <span t-esc="o.amt_in_words('%.2f'%(tax_line[1]))"/><br/>
                </t>
                Total Invoice Value in Words: 
                <span t-esc="o.currency_id.amount_to_text(o.amount_total)"/>
            </td>
            <td style="border:2px solid black;text-align:left;font-size:13px;" colspan="2">
                Taxable Amount<br/>
                <t t-foreach="o.amount_by_group" t-as="tax_line">
                    <t t-set="percent" t-value="round(tax_line[1]/(o.amount_untaxed/100))"/>
                   <span t-esc="tax_line[0]"/> @ <span t-esc="percent"/> %<br/>
                </t>


                <strong>TOTAL</strong>
            </td>
            <td style="border:2px solid black;text-align:right;font-size:13px;" colspan="2">
                <span t-field="o.amount_untaxed"/><br/>
                <t t-foreach="o.amount_by_group" t-as="tax_line">
                    <!-- <span t-esc="'%.2f'%(tax_line[1])"/> ₹<br/> -->
                <span t-field="o.currency_id.symbol"/>
                    <span t-esc="'%.2f'%(tax_line[1])"/><br/>
                </t>
                <strong><span t-field="o.amount_total"/></strong>
            </td>
        </tr>
        <tr >
            <td colspan="7" style="border:2px solid black;padding:1px;text-align:justfy;font-size:13px;padding:5px;">
                Terms<br/>
                1. Subject To Mumbai Jurisdiction<br/>
                2. No Claims will be recognised unless notifies in writing within 8 days of reciept of goods<br/>
                3. Interest @24% per annum will be charged if payment is not made within the due date<br/>
                Declaration:<br/>
                Certified that the particulars given above are true and correct and the amount indicated represents the price actually charged and that there is no flow of additional consideration directly or indirectly from buyer.
            </td>
            <td colspan="3" style="text-align:center;padding:1px;border:2px solid black;font-size:13px;">
                <span style="padding-left:2px;"><strong>for SF Dyes Private Ltd</strong></span>
            </td>
            <!-- <td colspan="3" class="text-center" style="border:2px solid black;width:30%;">
            <div style="padding:5px"/>
            <span>for SF Dyes Private Ltd</span>
            <div style="padding:40px"/>
            <span>Authorized Signatory</span>
            </td> -->
        </tr>
        <tr>
            <td style="text-align:center;font-size:13px;border:2px solid white;border-top:2px solid black" colspan="10">
                <span>
                    Registered Office : 9 Sprott Road, Ballard Estate, Mumbai 400001, India.
                </span>
                <span> CIN No</span>
                    <span t-field="o.company_id.company_registry"/>
                <span> PAN No AAABCS5098L</span>
            </td>
        </tr>
    </table>                    
    </t>
    </t>
    </t>
    </template>
</data>
</odoo>
